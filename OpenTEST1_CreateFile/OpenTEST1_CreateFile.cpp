// OpenTEST1_CreateFile.cpp : アプリケーションのエントリ ポイントを定義します。
//

#include "framework.h"
#include "OpenTEST1_CreateFile.h"

#include "Resource.h"

#define MAX_LOADSTRING 100

// グローバル変数:
HINSTANCE hInst;                                // 現在のインターフェイス
WCHAR szTitle[MAX_LOADSTRING];                  // タイトル バーのテキスト
WCHAR szWindowClass[MAX_LOADSTRING];            // メイン ウィンドウ クラス名

// このコード モジュールに含まれる関数の宣言を転送します:
ATOM                MyRegisterClass(HINSTANCE hInstance);
BOOL                InitInstance(HINSTANCE, int);
LRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);
INT_PTR CALLBACK    About(HWND, UINT, WPARAM, LPARAM);

void TEST_CreateTmpFile() {

}


INT_PTR CALLBACK DialogFunc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) {

	if (message == WM_COMMAND) {
		int ID = wParam & 0xFFFF;
		if (ID == IDC_BUTTON1) {
			TEST_CreateTmpFile();
		}
	}


	return NULL;
	;
}


int APIENTRY wWinMain(_In_ HINSTANCE hInstance,
                     _In_opt_ HINSTANCE hPrevInstance,
                     _In_ LPWSTR    lpCmdLine,
                     _In_ int       nCmdShow)
{
    UNREFERENCED_PARAMETER(hPrevInstance);
    UNREFERENCED_PARAMETER(lpCmdLine);

    // TODO: ここにコードを挿入してください。

    // グローバル文字列を初期化する
    LoadStringW(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);
    LoadStringW(hInstance, IDC_OPENTEST1CREATEFILE, szWindowClass, MAX_LOADSTRING);

	HWND hWnd;
	DLGPROC DialogFuncPtr = DialogFunc;
	hWnd = ::CreateDialog(hInstance, MAKEINTRESOURCE(IDD_DIALOG1), ::GetDesktopWindow(), DialogFuncPtr);
	if (hWnd == NULL) {
		return FALSE;
	}
	::ShowWindow(hWnd, SW_SHOW);

    HACCEL hAccelTable = LoadAccelerators(hInstance, MAKEINTRESOURCE(IDC_OPENTEST1CREATEFILE));

    MSG msg;

    // メイン メッセージ ループ:
    while (GetMessage(&msg, nullptr, 0, 0))
    {
        if (!TranslateAccelerator(msg.hwnd, hAccelTable, &msg))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }

    return (int) msg.wParam;
}


